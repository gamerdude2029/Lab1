@page
@model Lab1.Pages.GrantModel
@{
	ViewData["Title"] = "Grant Page";
}

<h1>Log a Grant!</h1>
<br />
<br />

@{
	if (ViewData["SuccessMessage"] != null)
	{
		<p class="text-success">@ViewData["SuccessMessage"]</p>
	}
}

@if (TempData["SuccessMessage"] != null)
{
	<div id="successAlert" class="alert alert-success alert-dismissible fade show" role="alert">
		@TempData["SuccessMessage"]
		<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
	</div>
}

<table>
	<thead>
		<tr>
			<th>Category</th>
			<th>Funding Agency</th>
		</tr>
	</thead>
	<tbody>
		@foreach (var grants in Model.GrantInfo)
		{
			<tr>
				<td>@grants.Category</td>
				<td>@grants.FundingAgency</td>
			</tr>
		}
	</tbody>
</table>


<form asp-page-handler="GrantCategory" method="post">
	<select asp-for="SelectedNumber" class="form-select" id="grantCategory">
		<option value="1">Federal</option>
		<option value="2">State</option>
		<option value="3">University</option>
		<option value="4">Business-Funded</option>
	</select>
	<span asp-validation-for="SelectedNumber" class="text-danger"></span>
	<br />
	<input asp-for="AgencyOrBusiness" id="agency" placeholder="Who is funding the Grant?" />
	<span asp-validation-for="AgencyOrBusiness" class="text-danger"></span>
	<br />
	<br />
	<p>Please enter a submission date: <input type="date" asp-for="SubmissionDate" id="submissionDate" /></p>
	<span asp-validation-for="SubmissionDate" class="text-danger"></span>
	<br />
	<p>Please enter an award date: <input type="date" asp-for="AwardDate" id="awardDate" /></p>
	<span asp-validation-for="AwardDate" class="text-danger"></span>
	<br />
	<input asp-for="MoneyInvolved" placeholder="How much $ involved?" id="moneyInvolved" />
	<span asp-validation-for="MoneyInvolved" class="text-danger"></span>
	<br />
	<br />
	<input asp-for="LeadFaculty" placeholder="Who is the lead faculty?" id="leadFaculty" />
	<span asp-validation-for="LeadFaculty" class="text-danger"></span>
	<br />
	<br />
	<button class="btn btn-primary">Submit</button>
	<button type="button" class="btn btn-secondary" onclick="populateForm()">Populate</button>
	<button class="btn btn-danger">Clear</button>
</form>

<script>
	//This script was generated by AI and translated to the other pages
	   function populateForm() {
		   document.getElementById("grantCategory").value = "3";
		   document.getElementById("agency").value = "National Science Foundation";
		   document.getElementById("submissionDate").value = "2025-06-15";
		   document.getElementById("awardDate").value = "2025-09-20";
		   document.getElementById("moneyInvolved").value = "50000";
		   document.getElementById("leadFaculty").value = "Dr. Jane Doe";
	   }
</script>